<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Bilgi Notu Hazƒ±rlayƒ±cƒ±</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #3b82f6;
      --primary-dark: #2563eb;
      --secondary: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --light: #f9fafb;
      --dark: #1f2937;
      --gray: #6b7280;
      --border: #d1d5db;
      --shadow: 0 4px 12px rgba(0,0,0,0.1);
      --header-bg: #ffffff;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: #f3f4f6;
      color: var(--dark);
      line-height: 1.5;
      padding: 0;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      -webkit-text-size-adjust: 100%;
    }
    
    .header {
      background: var(--header-bg);
      box-shadow: 0 4px 15px rgba(0,0,0,0.10);
      padding: 18px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 3px solid #3b82f6;
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .brand {
      font-weight: 600;
      font-size: 18px;
      color: var(--dark);
      letter-spacing: 0.3px;
    }
    
    .title {
      font-weight: 600;
      font-size: 20px;
      color: var(--dark);
    }
    
    .container {
      display: flex;
      flex: 1;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
      padding: 20px;
      gap: 20px;
    }
    
    .form-container {
      flex: 1;
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      overflow-y: auto;
      max-height: calc(100vh - 120px);
    }
    
    .preview-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #fff;
      border-radius: 12px;
      box-shadow: var(--shadow);
      overflow: hidden;
      max-height: calc(100vh - 120px);
    }
    
    .preview-header {
      padding: 15px 20px;
      background: var(--light);
      border-bottom: 1px solid var(--border);
      font-weight: 600;
    }
    
    .preview-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }
    
    h2 {
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--dark);
      font-size: 22px;
    }
    
    h3 {
      font-weight: 500;
      margin: 15px 0 10px;
      color: #374151;
      font-size: 18px;
    }
    
    .section {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border);
    }
    
    .section:last-child {
      border-bottom: none;
    }
    
    label {
      display: block;
      text-align: left;
      margin-top: 12px;
      font-size: 14px;
      color: var(--gray);
      font-weight: 500;
    }
    
    input, textarea, select, button {
      margin-top: 5px;
      padding: 12px;
      width: 100%;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.2s;
    }
    
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
    }
    
    button {
      margin-top: 15px;
      background: var(--primary);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    button:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    button.secondary {
      background: var(--secondary);
    }
    
    button.secondary:hover {
      background: #0da271;
    }
    
    button.warning {
      background: var(--warning);
    }
    
    button.warning:hover {
      background: #d97706;
    }
    
    button.danger {
      background: var(--danger);
    }
    
    button.danger:hover {
      background: #dc2626;
    }
    
    .list {
      margin-top: 15px;
      text-align: left;
    }
    
    .person {
      background: var(--light);
      border: 1px solid var(--border);
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 8px;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      min-height: 44px;
    }
    
    .person-info {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .actions {
      display: flex;
      gap: 8px;
      opacity: 0;
      transition: opacity 0.2s;
      pointer-events: none;
    }
    
    .person.active .actions,
    .person:focus-within .actions,
    .person:hover .actions {
      opacity: 1;
      pointer-events: auto;
    }
    
    .action-btn {
      border: none;
      background: transparent;
      cursor: pointer;
      font-size: 16px;
      padding: 8px;
      min-width: 44px;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .edit-btn { color: var(--secondary); }
    .delete-btn { color: var(--danger); }
    
    #output {
      white-space: pre-line;
      border: 1px solid var(--border);
      padding: 20px;
      background: var(--light);
      border-radius: 10px;
      text-align: left;
      font-size: 15px;
      line-height: 1.5;
      flex: 1;
      overflow-y: auto;
    }
    
    .imza {
      border: 1px solid var(--border);
      padding: 15px;
      margin-top: 15px;
      border-radius: 10px;
      background: var(--light);
      text-align: left;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .button-group button {
      margin-top: 0;
    }
    
    .imza-ozet {
      display: none;
      margin-top: 10px;
      font-size: 14px;
      color: #374151;
      padding: 10px;
      background: white;
      border-radius: 6px;
    }
    
    .actions-bottom {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    .actions-bottom button {
      flex: 1;
    }
    
    /* Responsive tasarƒ±m */
    @media (max-width: 1024px) {
      .container {
        flex-direction: column;
        padding: 15px;
        gap: 15px;
      }
      
      .form-container, .preview-container {
        max-height: none;
        width: 100%;
      }
      
      .preview-container {
        min-height: 400px;
      }
    }
    
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      
      .container {
        padding: 10px;
        gap: 10px;
      }
      
      .form-container {
        padding: 20px;
      }
      
      h2 {
        font-size: 20px;
      }
      
      h3 {
        font-size: 16px;
      }
      
      input, textarea, select, button {
        font-size: 16px;
      }
      
      .person {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .actions {
        align-self: flex-end;
        opacity: 1;
        pointer-events: auto;
      }
      
      .button-group, .actions-bottom {
        flex-direction: column;
      }
    }
    
    @media (max-width: 480px) {
      .form-container {
        padding: 15px;
      }
      
      .preview-content {
        padding: 15px;
      }
      
      #output {
        padding: 15px;
      }
    }
    
    /* iOS √∂zel stilleri */
    @supports (-webkit-touch-callout: none) {
      input, textarea, select {
        font-size: 16px; /* iOS zoom'u √∂nlemek i√ßin */
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-content">
      <div class="brand">Samed √ñZT√úRK</div>
      <div class="title">üìÑ Bilgi Notu Hazƒ±rlayƒ±cƒ±</div>
    </div>
  </div>

  <div class="container">
    <div class="form-container">
      <!-- Ba≈ülƒ±k se√ßimi -->
      <div class="section">
        <label>Ba≈ülƒ±k Se√ß:</label>
        <select id="baslik">
          <option value="valim">SAYIN VALƒ∞M</option>
          <option value="makam">MAKAMA ARZ</option>
        </select>
      </div>

      <!-- ƒ∞mza bilgileri -->
      <div class="section">
        <h3>‚úçÔ∏è ƒ∞mza Bilgileri</h3>
        <label>Vali i√ßin Ad Soyad:</label>
        <input type="text" id="valimAd" placeholder="Ad Soyad">
        <label>Vali i√ßin Makam:</label>
        <input type="text" id="valimMakam" placeholder="Makam">

        <label>Makama Arz i√ßin Ad Soyad:</label>
        <input type="text" id="makamAd" placeholder="Ad Soyad">
        <label>Makama Arz i√ßin Makam:</label>
        <input type="text" id="makamMakam" placeholder="Makam">
        
        <div id="imzaOzet" class="imza-ozet"></div>
        
        <div class="button-group">
          <button type="button" id="imzaKaydetBtn" onclick="kaydetImza()">üíæ ƒ∞mza Bilgilerini Kaydet</button>
          <button type="button" id="imzaDuzenleBtn" onclick="duzenleImza()" class="secondary" style="display:none;">‚úèÔ∏è D√ºzenle</button>
        </div>
      </div>

      <!-- Konu -->
      <div class="section">
        <label>Konu:</label>
        <input type="text" id="konu" placeholder="Konu giriniz">
      </div>

      <!-- ≈ûahƒ±s ekleme -->
      <div class="section">
        <h3>≈ûahƒ±s Bilgileri</h3>
        <label>≈ûahƒ±s Tipi:</label>
        <select id="tip">
          <option value="M√º≈üteki">M√º≈üteki</option>
          <option value="Maƒüdur">Maƒüdur</option>
          <option value="M√º≈üteki/≈û√ºpheli">M√º≈üteki/≈û√ºpheli</option>
          <option value="≈û√ºpheli">≈û√ºpheli</option>
          <option value="Tanƒ±k">Tanƒ±k</option>
        </select>

        <label>Ad Soyad:</label>
        <input type="text" id="adsoyad" placeholder="Ad Soyad">

        <label>Doƒüum Tarihi:</label>
        <input type="text" id="dogumtarih" placeholder="1907">

        <label>Meslek:</label>
        <input type="text" id="meslek" placeholder="Meslek">

        <label>Doƒüum Yeri:</label>
        <input type="text" id="dogumyeri" placeholder="Doƒüum Yeri">

        <label>Su√ß Kaydƒ±:</label>
        <input type="text" id="suckaydi" placeholder="Su√ß kaydƒ± giriniz (bo≈ü bƒ±rakƒ±lƒ±rsa Kaydƒ± Yoktur)">

        <button onclick="ekleSahis()">+ ≈ûahƒ±s Ekle</button>

        <div class="list" id="sahisListesi"></div>
      </div>

      <!-- Metin -->
      <div class="section">
        <label>Metin:</label>
        <textarea id="metin" rows="5" placeholder="Olayla ilgili metni giriniz"></textarea>
      </div>

      <!-- Alt Butonlar -->
      <div class="actions-bottom">
        <button onclick="olustur()">üìå √áƒ±ktƒ± Al</button>
        <button class="warning" onclick="sayfayiTemizle()">üóëÔ∏è Sayfayƒ± Temizle</button>
      </div>
    </div>

    <div class="preview-container">
      <div class="preview-header">√ñnizleme</div>
      <div class="preview-content">
        <div id="output"></div>
      </div>
    </div>
  </div>

  <script>
    let sahislar = [];
    let editIndex = null;
    const IMZA_KEY = "bilgiNotu_imza";
    const SAHISLAR_KEY = "bilgiNotu_sahislar";
    const KONU_KEY = "bilgiNotu_konu";
    const METIN_KEY = "bilgiNotu_metin";

    function ekleSahis() {
      let tip = document.getElementById("tip").value;
      let adsoyad = document.getElementById("adsoyad").value;
      let dt = document.getElementById("dogumtarih").value;
      let meslek = document.getElementById("meslek").value;
      let dy = document.getElementById("dogumyeri").value;
      let kayit = document.getElementById("suckaydi").value.trim() || "Kaydƒ± Yoktur";

      if (adsoyad.trim() === "") {
        alert("L√ºtfen ad soyad giriniz!");
        return;
      }

      if (editIndex !== null) {
        sahislar[editIndex] = { tip, adsoyad, dt, meslek, dy, kayit };
        editIndex = null;
        document.querySelector('button[onclick="ekleSahis()"]').textContent = "+ ≈ûahƒ±s Ekle";
      } else {
        sahislar.push({ tip, adsoyad, dt, meslek, dy, kayit });
      }

      kaydetSahislar();
      guncelleListe();

      // Formu temizle
      document.getElementById("adsoyad").value = "";
      document.getElementById("dogumtarih").value = "";
      document.getElementById("meslek").value = "";
      document.getElementById("dogumyeri").value = "";
      document.getElementById("suckaydi").value = "";
    }

    function guncelleListe() {
      const liste = document.getElementById("sahisListesi");
      liste.innerHTML = sahislar.map((s, i) => `
        <div class="person" tabindex="0">
          <div class="person-info">
            <strong>${s.tip}:</strong> ${s.adsoyad} (${s.dt} - ${s.meslek} - ${s.dy}) / ${s.kayit}
          </div>
          <div class="actions">
            <button class="action-btn edit-btn" onclick="duzenleSahis(${i})" title="D√ºzenle">‚úèÔ∏è</button>
            <button class="action-btn delete-btn" onclick="silSahis(${i})" title="Sil">üóëÔ∏è</button>
          </div>
        </div>
      `).join("");
      
      // Kodlama Samed √ñZT√úRK'e aittir. 
      document.querySelectorAll('.person').forEach((person, i) => {
        person.addEventListener('touchstart', function(e) {
          this.classList.add('active');
        });
        
        person.addEventListener('touchend', function(e) {
          setTimeout(() => {
            this.classList.remove('active');
          }, 500);
        });
      });
    }

    function duzenleSahis(i) {
      let s = sahislar[i];
      document.getElementById("tip").value = s.tip;
      document.getElementById("adsoyad").value = s.adsoyad;
      document.getElementById("dogumtarih").value = s.dt;
      document.getElementById("meslek").value = s.meslek;
      document.getElementById("dogumyeri").value = s.dy;
      document.getElementById("suckaydi").value = s.kayit === "Kaydƒ± Yoktur" ? "" : s.kayit;
      editIndex = i;
      
      // Buton metnini deƒüi≈ütir
      document.querySelector('button[onclick="ekleSahis()"]').textContent = "‚úì ≈ûahƒ±sƒ± G√ºncelle";
      
      // D√ºzenlenen √∂ƒüeye scroll et
      document.getElementById("adsoyad").scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function silSahis(i) {
      if (confirm("Bu ≈üahsƒ± silmek istediƒüinizden emin misiniz?")) {
        sahislar.splice(i, 1);
        kaydetSahislar();
        guncelleListe();
      }
    }

    function kaydetSahislar() {
      localStorage.setItem(SAHISLAR_KEY, JSON.stringify(sahislar));
    }
    
    function yukleSahislar() {
      try {
        const raw = localStorage.getItem(SAHISLAR_KEY);
        if (!raw) return;
        sahislar = JSON.parse(raw);
        guncelleListe();
      } catch (e) {
        console.error("≈ûahƒ±s verileri y√ºklenirken hata:", e);
      }
    }

    function olustur() {
      let baslik = document.getElementById("baslik").value;
      let konu = document.getElementById("konu").value;
      let metin = document.getElementById("metin").value;

      // Konu zorunluluƒüu kaldƒ±rƒ±ldƒ± - her durumda √ßƒ±ktƒ± alƒ±nabiliyor

      const oncelik = ["M√º≈üteki", "Maƒüdur", "M√º≈üteki/≈û√ºpheli", "≈û√ºpheli", "Tanƒ±k"];
      let sirali = [];
      oncelik.forEach(t => {
        sahislar.filter(s => s.tip === t).forEach(s => {
          let kayitMetin = s.kayit === "Kaydƒ± Yoktur" ? "Kaydƒ± Yoktur" : s.kayit + " su√ßlarƒ±ndan kaydƒ± vardƒ±r";
          sirali.push(`${s.tip}: <b>*${s.adsoyad}*</b> (${s.dt} - ${s.dy} - ${s.meslek})\n${kayitMetin}`);
        });
      });

      let cikti = "";

      if (baslik === "valim") {
        cikti += "<b>*SAYIN VALƒ∞M*</b>\n\n";
        cikti += "<b>*√áƒ±narcƒ±k ƒ∞l√ße Emniyet M√ºd√ºrl√ºƒü√º*</b>\n\n";
      } else {
        cikti += "<b>*MAKAMA ARZ*</b>\n\n";
        cikti += "<b>*√áƒ±narcƒ±k ƒ∞l√ße Emniyet M√ºd√ºrl√ºƒü√º*</b>\n\n";
      }

      cikti += "Konu: <b>*" + konu + "*</b>\n\n";

      sirali.forEach(s => {
        cikti += s + "\n\n";
      });

      cikti += metin + "\n\n";
      cikti += "Konu hakkƒ±nda N√∂bet√ßi Cumhuriyet Savcƒ±sƒ±na bilgi verilerek alƒ±nan talimatlar doƒürultusunda ƒ∞KMALEN tahkikata ba≈ülanmƒ±≈ütƒ±r.\n\n";
      
      if (baslik === "valim") {
        let ad = document.getElementById("valimAd").value;
        let makam = document.getElementById("valimMakam").value;
        cikti += "<b>*Arz ederim.*</b>\n<b>*" + ad + "*</b>\n<b>*" + makam + "*</b>";
      } else {
        let ad = document.getElementById("makamAd").value;
        let makam = document.getElementById("makamMakam").value;
        cikti += "<b>*Arz ederim.*</b>\n<b>*" + ad + "*</b>\n<b>*" + makam + "*</b>";
      }

      document.getElementById("output").innerHTML = cikti;
    }

    function kaydetImza() {
      const valimAd = document.getElementById("valimAd").value.trim();
      const valimMakam = document.getElementById("valimMakam").value.trim();
      const makamAd = document.getElementById("makamAd").value.trim();
      const makamMakam = document.getElementById("makamMakam").value.trim();

      if (!valimAd || !valimMakam || !makamAd || !makamMakam) {
        alert("L√ºtfen t√ºm imza bilgilerini doldurunuz!");
        return;
      }

      const imza = { valimAd, valimMakam, makamAd, makamMakam };
      localStorage.setItem(IMZA_KEY, JSON.stringify(imza));
      kilitleImzaAlanlari(true, imza);
      alert("ƒ∞mza bilgileri ba≈üarƒ±yla kaydedildi!");
    }

    function duzenleImza() {
      kilitleImzaAlanlari(false);
    }

    function kilitleImzaAlanlari(kilitli, imza) {
      const ids = ["valimAd", "valimMakam", "makamAd", "makamMakam"]; 
      ids.forEach(id => {
        const el = document.getElementById(id);
        el.disabled = kilitli;
      });

      const kaydetBtn = document.getElementById("imzaKaydetBtn");
      const duzenleBtn = document.getElementById("imzaDuzenleBtn");
      const imzaOzet = document.getElementById("imzaOzet");

      if (kilitli) {
        if (imza) {
          document.getElementById("valimAd").value = imza.valimAd || "";
          document.getElementById("valimMakam").value = imza.valimMakam || "";
          document.getElementById("makamAd").value = imza.makamAd || "";
          document.getElementById("makamMakam").value = imza.makamMakam || "";
        }
        kaydetBtn.style.display = "none";
        duzenleBtn.style.display = "inline-block";
        imzaOzet.style.display = "block";
        const vAd = document.getElementById("valimAd").value;
        const vMk = document.getElementById("valimMakam").value;
        const mAd = document.getElementById("makamAd").value;
        const mMk = document.getElementById("makamMakam").value;
        imzaOzet.innerHTML = `<strong>Vali:</strong> ${vAd} - ${vMk}<br><strong>Makama Arz:</strong> ${mAd} - ${mMk}`;
      } else {
        kaydetBtn.style.display = "inline-block";
        duzenleBtn.style.display = "none";
        imzaOzet.style.display = "none";
      }
    }

    // Sayfayƒ± Temizle fonksiyonu
    function sayfayiTemizle() {
      if (confirm("Sayfadaki veriler silinecek, emin misiniz?")) {
        // Konu alanƒ±nƒ± temizle
        document.getElementById("konu").value = "";
        localStorage.removeItem(KONU_KEY);
        
        // ≈ûahƒ±s bilgilerini temizle
        document.getElementById("adsoyad").value = "";
        document.getElementById("dogumtarih").value = "";
        document.getElementById("meslek").value = "";
        document.getElementById("dogumyeri").value = "";
        document.getElementById("suckaydi").value = "";
        
        // ≈ûahƒ±s listesini temizle
        sahislar = [];
        localStorage.removeItem(SAHISLAR_KEY);
        guncelleListe();
        
        // Metin alanƒ±nƒ± temizle
        document.getElementById("metin").value = "";
        localStorage.removeItem(METIN_KEY);
        
        // √ñnizleme alanƒ±nƒ± temizle
        document.getElementById("output").innerHTML = "";
        
        // D√ºzenleme modundan √ßƒ±k
        editIndex = null;
        document.querySelector('button[onclick="ekleSahis()"]').textContent = "+ ≈ûahƒ±s Ekle";
        
        // Ba≈üarƒ±yla silindi uyarƒ±sƒ± kaldƒ±rƒ±ldƒ±
      }
    }

    function yukleImza() {
      try {
        const raw = localStorage.getItem(IMZA_KEY);
        if (!raw) return;
        const imza = JSON.parse(raw);
        document.getElementById("valimAd").value = imza.valimAd || "";
        document.getElementById("valimMakam").value = imza.valimMakam || "";
        document.getElementById("makamAd").value = imza.makamAd || "";
        document.getElementById("makamMakam").value = imza.makamMakam || "";
        kilitleImzaAlanlari(true, imza);
      } catch (e) {
        console.error("ƒ∞mza verileri y√ºklenirken hata:", e);
      }
    }

    document.getElementById("konu").addEventListener("input", function() {
      localStorage.setItem(KONU_KEY, this.value);
    });
    
    document.getElementById("metin").addEventListener("input", function() {
      localStorage.setItem(METIN_KEY, this.value);
    });
    
    function yukleKonuMetin() {
      const konu = localStorage.getItem(KONU_KEY);
      if (konu) document.getElementById("konu").value = konu;
      const metin = localStorage.getItem(METIN_KEY);
      if (metin) document.getElementById("metin").value = metin;
    }

    // Sayfa y√ºklendiƒüinde √ßalƒ±≈üacak kod
    document.addEventListener("DOMContentLoaded", function() {
      yukleImza();
      yukleSahislar();
      yukleKonuMetin();
      
      // ƒ∞lk √∂nizlemeyi olu≈ütur
      olustur();
      
      // iOS i√ßin t√ºm butonlara touch event'leri ekle
      document.querySelectorAll('button').forEach(button => {
        button.addEventListener('touchstart', function() {
          this.style.opacity = '0.7';
        });
        
        button.addEventListener('touchend', function() {
          this.style.opacity = '';
        });
      });
    });
  </script>
</body>
</html>